<div class="container">
    <div class="card">
        <div class="card-body">
            <div class="panel panel-default" *ngIf="user">
                <div class="panel-body">
                    <div class="row" *ngIf="!editPassword && !editUserDetails">
                        <div class="col-md-4 col-xs-12 col-sm-6 col-lg-4">
                            <img alt="User Pic"
                                src="https://x1.xingassets.com/assets/frontend_minified/img/users/nobody_m.original.jpg"
                                id="profile-image1" class="img-circle img-responsive">
                        </div>
                        <div class="col-md-8 col-xs-12 col-sm-6 col-lg-8">
                            <div class="container">
                                <h2>{{user?.first_name}} {{user?.last_name}}</h2>
                                <p>username: <b> {{user?.username}}</b></p>
                                <p><b>{{user?.email}}</b></p>
                            </div>
                            <hr>
                            <div class="col-12" style="text-align: center;">
                                <button type="button" class="btn btn-secondary" (click)="initForm()">Edit Profile</button>
                                <button type="button" class="btn btn-secondary" style="float: right;" (click)="changePassword()">Change Password</button>
                            </div>
                        </div>
                    </div>
        
                    <div *ngIf="editUserDetails">
                        <form [formGroup]="userForm">
                            <div class="row">
                
                                <div class="col-lg-4 col-md-6">
                                    <div class="form-group">
                                        <label for="first_name" class="bmd-label-floating label">
                                            <span>First Name</span>
                                            <span class="input-required">(required)</span>
                                        </label>
                                        <input type="text" id="first_name" class="form-control capitalize"
                                            formControlName="first_name" autocomplete="off">
                
                                        <div *ngIf="first_name.invalid && userFormSubmitted">
                                            <div *ngIf="first_name.errors.required">
                                                <small class="error-message">*required field!</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                
                                <div class="col-lg-4 col-md-6">
                                    <div class="form-group">
                                        <label for="last_name" class="bmd-label-floating label">
                                            <span>Last Name</span>
                                            <span class="input-required">(required)</span>
                                        </label>
                                        <input type="text" id="last_name" class="form-control capitalize"
                                            formControlName="last_name" autocomplete="off">
                
                                        <div *ngIf="last_name.invalid && userFormSubmitted">
                                            <div *ngIf="last_name.errors.required">
                                                <small class="error-message">*required field!</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                
                                <div class="col-lg-4 col-md-6">
                                    <div class="form-group">
                                        <label for="username" class="bmd-label-floating label">
                                            <span>Username</span>
                                            <span class="input-required">(required)</span>
                                        </label>
                                        <input type="text" id="email" class="form-control"
                                            formControlName="username" autocomplete="off">
                
                                        <div *ngIf="username.invalid && userFormSubmitted">
                                            <div *ngIf="username.errors.required">
                                                <small class="error-message">*required field!</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
        
                                <div class="col-lg-4 col-md-6">
                                    <div class="form-group">
                                        <label for="email" class="bmd-label-floating label">
                                            <span>Email</span>
                                            <span class="input-required">(required)</span>
                                        </label>
                                        <input type="email" id="email" class="form-control"
                                            formControlName="email" autocomplete="off">
                
                                        <div *ngIf="email.invalid && userFormSubmitted">
                                            <div *ngIf="email.errors.required">
                                                <small class="error-message">*required field!</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                
                                <div class="col-lg-12 col-md-12 col-sm-12" style="text-align: center; margin-top: 20px; margin-bottom: 20px;">
                                    <button type="button" (click)="cancelEditUserDetails()" class="btn btn-secondary submit-button" style="margin: 0px 15px;">cancel</button>
                                    <button type="button" (click)="onSubmit()" class="btn btn-primary submit-button">submit</button>
                                </div>
                
                            </div>
                        </form>
                    </div>
        
                    <div *ngIf="editPassword">
                        <div class="row">
                
                            <div class="col-lg-12">
                                <div *ngIf="!enterNewPassword">
                                    <div class="form-group">
                                        <div style="display: inline;">
                                            <label for="current-password" class="bmd-label-floating label" style="margin-right: 15px;">
                                                <span>Current Password</span>
                                                <span class="input-required">(required):</span>
                                            </label>
                                            <input type="password" id="current-password" autocomplete="off" class="password-input" [(ngModel)]="currentPassword" #CurrentPassword="ngModel" required>
                                        </div>

                                        <div *ngIf="CurrentPassword.invalid && currentPasswordSubmitted">
                                            <div *ngIf="CurrentPassword.errors.required">
                                                <small class="error-message">*required field!</small>
                                            </div>
                                        </div>

                                        <div *ngIf="currentPasswordError && currentPasswordSubmitted">
                                            <small class="error-message">*{{currentPasswordError}}!</small>
                                        </div>

                                        <div>
                                            <button type="button" class="btn btn-info" style="margin-left: 15px; margin: 10px 0px; padding: 5px 20px;" (click)="submitCurrentPassword()">next</button>
                                        </div>
                                       
                                    </div>
                                </div>

                                <div *ngIf="enterNewPassword">
                                    <div class="form-group">
                                        <div style="display: inline;">
                                            <label for="new-password" class="bmd-label-floating label" style="margin-right: 15px;">
                                                <span>New Password</span>
                                                <span class="input-required">(required):</span>
                                            </label>
                                            <input type="password" id="new-password" autocomplete="off" class="password-input" [(ngModel)]="newPassword" #NewPassword="ngModel" required>
                                        </div>

                                        <div *ngIf="NewPassword.invalid && newPasswordSubmitted">
                                            <div *ngIf="NewPassword.errors.required">
                                                <small class="error-message">*required field!</small>
                                            </div>
                                        </div>

                                        <div *ngIf="newPasswordError && newPasswordSubmitted">
                                            <small class="error-message">*{{newPasswordError}}!</small>
                                        </div>
                                       
                                    </div>

                                    <div class="form-group">
                                        <div style="display: inline;">
                                            <label for="confirm-password" class="bmd-label-floating label" style="margin-right: 15px;">
                                                <span>Confirm Password</span>
                                                <span class="input-required">(required):</span>
                                            </label>
                                            <input type="password" id="confirm-password" autocomplete="off" class="password-input" [(ngModel)]="newPasswordConfirm" #NewPasswordConfirm="ngModel" required>
                                        </div>

                                        <div *ngIf="NewPasswordConfirm.invalid && newPasswordSubmitted">
                                            <div *ngIf="NewPasswordConfirm.errors.required">
                                                <small class="error-message">*required field!</small>
                                            </div>
                                        </div>

                                        <div *ngIf="newPasswordError && newPasswordSubmitted">
                                            <small class="error-message">*{{newPasswordError}}!</small>
                                        </div>
                                       
                                    </div>

                                    <div>
                                        <button type="button" class="btn btn-info" style="margin-left: 15px; margin: 10px 0px; padding: 5px 20px;" (click)="submitNewPassword()">submit</button>
                                    </div>

                                </div>

                                <div>
                                    <button type="button" class="btn btn-secondary" style="margin-left: 15px; margin: 10px 0px; padding: 5px 20px;" (click)="cancelEditPassword()">Cancel</button>
                                </div>

                            </div>
                        </div>
                    </div>
        
                </div>
            </div>
        </div>
    </div>
</div>